
 <!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªè H√†ng</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <a href="/">üè† Trang ch·ªß</a> |
        <a href="/product">üì¶ Danh s√°ch s·∫£n ph·∫©m</a>
    </header>

    <main>
        <div class="cart-container">
            <h1>Gi·ªè h√†ng</h1>
            <ul class="cart-list">
              <% let totalPrice = 0; %>
              <% cartItems.forEach(function(item) { 
              let quantity = (cart && cart[item._id]) ? cart[item._id] : 1; // ‚úÖ Ki·ªÉm tra cart tr∆∞·ªõc khi d√πng
              let itemTotal = item.price * quantity;
              totalPrice += itemTotal;%>
            <li class="cart-item">
              <img class="cart-image" src="<%= item.image %>" alt="<%= item.name %>">
              <p class="cart-name"><%= item.name %></p>
              <p class="cart-price"><%= item.price.toLocaleString('vi-VN') %> VNƒê</p>

              <form action="/cart/update/<%= item._id %>" method="POST">
                  <button class="decrease" type="submit" name="action" value="decrease">‚ûñ</button>
                  <span class="cart-quantity"><%= quantity %></span>
                  <button class="increase" type="submit" name="action" value="increase">‚ûï</button>
              </form>

              <form action="/cart/remove/<%= item._id %>" method="POST">
                  <button type="submit" class="remove-from-cart-btn">X√≥a kh·ªèi gi·ªè</button>
              </form>
              <form action="/cart/totalPrice/" method="POST">
                  <p class="cart-item-total">T·ªïng: <%= itemTotal.toLocaleString('vi-VN') %> VNƒê</p>
              </form>
            </li>
            <% }); %>
            <form action="/cart/totalCart/" method="POST">
              <h2>T·ªïng ti·ªÅn: <%= totalPrice.toLocaleString('vi-VN') %> VNƒê</h2>
            </form>
              <a class="back-link" href="/">Quay l·∫°i</a>
        </div>
    </main>
</body>
</html>
